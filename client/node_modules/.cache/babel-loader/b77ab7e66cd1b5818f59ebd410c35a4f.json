{"ast":null,"code":"const Drawing = socket => {\n  var canvas = document.getElementsByClassName('whiteboard')[0]; //var canvas = document.getElementById('canvas');\n\n  console.log(canvas);\n  var colors = document.getElementsByClassName('color');\n  var context = canvas.getContext('2d');\n  var current = {\n    color: 'black'\n  };\n  var drawing = false;\n  const actionHistory = [];\n  let actionPointer = -1;\n\n  function putAction(data) {\n    if (actionHistory.length - 1 > actionPointer) {\n      actionHistory.splice(actionPointer + 1);\n    }\n\n    actionHistory.push(data);\n    actionPointer += 1;\n  }\n\n  ;\n\n  function onUndo() {\n    if (actionPointer < 0) {\n      return;\n    }\n\n    const action = actionHistory[actionPointer];\n    actionPointer -= 1;\n    console.log(1);\n    socket.emit(\"hideLine\", {\n      id: action.id,\n      hidden: true\n    });\n  }\n\n  function redraw(data) {\n    const {\n      lineHist\n    } = data;\n    context.clearRect(0, 0, context.canvas.clientWidth, context.canvas.clientHeight);\n\n    for (const line of lineHist) {\n      console.log(line);\n      drawLine(line.x0, line.y0, line.x1, line.y1, line.color, line.id, line.hidden, false);\n    }\n  }\n\n  ;\n  socket.on(\"redraw\", redraw);\n  window.addEventListener(\"keydown\", event => {\n    if ((event.ctrlKey || event.metaKey) && !drawing) {\n      if (event.key === \"z\") {\n        onUndo();\n      }\n\n      ;\n    }\n\n    ;\n  });\n  canvas.addEventListener('mousedown', onMouseDown, false);\n  canvas.addEventListener('mouseup', onMouseUp, false);\n  canvas.addEventListener('mouseout', onMouseUp, false);\n  canvas.addEventListener('mousemove', throttle(onMouseMove, 10), false); //Touch support for mobile devices\n\n  canvas.addEventListener('touchstart', onMouseDown, false);\n  canvas.addEventListener('touchend', onMouseUp, false);\n  canvas.addEventListener('touchcancel', onMouseUp, false);\n  canvas.addEventListener('touchmove', throttle(onMouseMove, 10), false);\n\n  for (var i = 0; i < colors.length; i++) {\n    colors[i].addEventListener('click', onColorUpdate, false);\n  }\n\n  socket.on('drawing', onDrawingEvent);\n  window.addEventListener('resize', onResize, false);\n  onResize();\n\n  function drawLine(x0, y0, x1, y1, color, id, hidden, emit) {\n    if (hidden) return;\n    context.beginPath();\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.strokeStyle = color;\n\n    if (color === 'white') {\n      context.lineWidth = 30;\n    } else {\n      context.lineWidth = 3;\n    }\n\n    context.stroke();\n    context.closePath();\n\n    if (!emit) {\n      return;\n    }\n\n    var w = canvas.width;\n    var h = canvas.height;\n    socket.emit('drawing', {\n      x0: x0 / w,\n      y0: y0 / h,\n      x1: x1 / w,\n      y1: y1 / h,\n      color: color,\n      hidden: false,\n      id: id\n    });\n  }\n\n  function onMouseDown(e) {\n    drawing = true;\n    current.x = e.clientX || e.touches[0].clientX;\n    current.y = e.clientY || e.touches[0].clientY;\n    current.id = generateUniqueId();\n  }\n\n  function onMouseUp(e) {\n    if (!drawing) {\n      return;\n    }\n\n    drawing = false;\n    drawLine(current.x, current.y, e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY, current.color, current.id, false, true);\n    putAction({\n      act: 'drawing',\n      id: current.id\n    });\n    console.log(current.id);\n  }\n\n  function onMouseMove(e) {\n    if (!drawing) {\n      return;\n    }\n\n    drawLine(current.x, current.y, e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY, current.color, current.id, false, true);\n    current.x = e.clientX || e.touches[0].clientX;\n    current.y = e.clientY || e.touches[0].clientY;\n  }\n\n  function onColorUpdate(e) {\n    current.color = e.target.className.split(' ')[1];\n  } // limit the number of events per second\n\n\n  function throttle(callback, delay) {\n    var previousCall = new Date().getTime();\n    return function () {\n      var time = new Date().getTime();\n\n      if (time - previousCall >= delay) {\n        previousCall = time;\n        callback.apply(null, arguments);\n      }\n    };\n  }\n\n  function onDrawingEvent(data) {\n    var w = canvas.width;\n    var h = canvas.height;\n    drawLine(data.x0 * w, data.y0 * h, data.x1 * w, data.y1 * h, data.color);\n  } // make the canvas fill its parent\n\n\n  function onResize() {\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n  }\n\n  function generateUniqueId() {\n    const strong = 65535;\n    return new Date().getTime().toString(16) + \"-\" + Math.floor(strong * Math.random()).toString(16) + \"-\" + Math.floor(strong * Math.random()).toString(16) + \"-\" + Math.floor(strong * Math.random()).toString(16);\n  }\n};\n\n_c = Drawing;\nexport default Drawing;\n\nvar _c;\n\n$RefreshReg$(_c, \"Drawing\");","map":{"version":3,"sources":["/Users/jdszsl/Desktop/projects/wb/real-time-whiteboard/client/src/components/whiteboard/drawing/drawing.js"],"names":["Drawing","socket","canvas","document","getElementsByClassName","console","log","colors","context","getContext","current","color","drawing","actionHistory","actionPointer","putAction","data","length","splice","push","onUndo","action","emit","id","hidden","redraw","lineHist","clearRect","clientWidth","clientHeight","line","drawLine","x0","y0","x1","y1","on","window","addEventListener","event","ctrlKey","metaKey","key","onMouseDown","onMouseUp","throttle","onMouseMove","i","onColorUpdate","onDrawingEvent","onResize","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","closePath","w","width","h","height","e","x","clientX","touches","y","clientY","generateUniqueId","act","target","className","split","callback","delay","previousCall","Date","getTime","time","apply","arguments","innerWidth","innerHeight","strong","toString","Math","floor","random"],"mappings":"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","sourcesContent":["const Drawing = (socket) => {\n    var canvas = document.getElementsByClassName('whiteboard')[0];\n    //var canvas = document.getElementById('canvas');\n    console.log(canvas)\n    var colors = document.getElementsByClassName('color');\n    var context = canvas.getContext('2d');\n\n    var current = {\n        color: 'black'\n    };\n    var drawing = false;\n\n    const actionHistory = [];\n    let actionPointer = -1;\n\n    function putAction(data) {\n        if (actionHistory.length - 1 > actionPointer) {\n            actionHistory.splice(actionPointer + 1);\n        }\n        actionHistory.push(data);\n        actionPointer += 1;\n    };\n\n    function onUndo() {\n        if (actionPointer < 0) {\n            return;\n        }\n        const action = actionHistory[actionPointer];\n        actionPointer -= 1;\n        console.log(1);\n        socket.emit(\"hideLine\", { id: action.id, hidden: true });\n    }\n\n    function redraw(data) {\n        const { lineHist } = data;\n        context.clearRect(\n            0,\n            0,\n            context.canvas.clientWidth,\n            context.canvas.clientHeight\n        );\n        for (const line of lineHist) {\n            console.log(line)\n            drawLine(line.x0, line.y0, line.x1, line.y1, line.color, line.id, line.hidden, false);\n        }\n    };\n\n    socket.on(\"redraw\", redraw);\n\n    window.addEventListener(\"keydown\", (event) => {\n        if ((event.ctrlKey || event.metaKey) && !drawing) {\n            if (event.key === \"z\") {\n                onUndo();\n            };\n        };\n    });\n\n    canvas.addEventListener('mousedown', onMouseDown, false);\n    canvas.addEventListener('mouseup', onMouseUp, false);\n    canvas.addEventListener('mouseout', onMouseUp, false);\n    canvas.addEventListener('mousemove', throttle(onMouseMove, 10), false);\n\n    //Touch support for mobile devices\n    canvas.addEventListener('touchstart', onMouseDown, false);\n    canvas.addEventListener('touchend', onMouseUp, false);\n    canvas.addEventListener('touchcancel', onMouseUp, false);\n    canvas.addEventListener('touchmove', throttle(onMouseMove, 10), false);\n\n    for (var i = 0; i < colors.length; i++) {\n        colors[i].addEventListener('click', onColorUpdate, false);\n    }\n\n    socket.on('drawing', onDrawingEvent);\n\n    window.addEventListener('resize', onResize, false);\n    onResize();\n\n\n    function drawLine(x0, y0, x1, y1, color, id, hidden, emit) {\n        if (hidden) return;\n        context.beginPath();\n        context.moveTo(x0, y0);\n        context.lineTo(x1, y1);\n        context.strokeStyle = color;\n        if(color === 'white'){\n            context.lineWidth = 30;\n        } else{\n            context.lineWidth = 3;\n        }\n        context.stroke();\n        context.closePath();\n\n        if (!emit) { return; }\n        var w = canvas.width;\n        var h = canvas.height;\n\n        socket.emit('drawing', {\n            x0: x0 / w,\n            y0: y0 / h,\n            x1: x1 / w,\n            y1: y1 / h,\n            color: color,\n            hidden: false,\n            id: id\n        });\n    }\n\n    function onMouseDown(e) {\n        drawing = true;\n        current.x = e.clientX || e.touches[0].clientX;\n        current.y = e.clientY || e.touches[0].clientY;\n        current.id = generateUniqueId();\n    }\n\n    function onMouseUp(e) {\n        if (!drawing) { return; }\n        drawing = false;\n        drawLine(current.x, current.y, e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY, current.color, current.id, false, true);\n        putAction({ act: 'drawing', id: current.id });\n        console.log(current.id);\n    }\n\n    function onMouseMove(e) {\n        if (!drawing) { return; }\n        drawLine(current.x, current.y, e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY, current.color, current.id, false, true);\n        current.x = e.clientX || e.touches[0].clientX;\n        current.y = e.clientY || e.touches[0].clientY;\n    }\n\n    function onColorUpdate(e) {\n        current.color = e.target.className.split(' ')[1];\n    }\n\n    // limit the number of events per second\n    function throttle(callback, delay) {\n        var previousCall = new Date().getTime();\n        return function () {\n            var time = new Date().getTime();\n\n            if ((time - previousCall) >= delay) {\n                previousCall = time;\n                callback.apply(null, arguments);\n            }\n        };\n    }\n\n    function onDrawingEvent(data) {\n        var w = canvas.width;\n        var h = canvas.height;\n        drawLine(data.x0 * w, data.y0 * h, data.x1 * w, data.y1 * h, data.color);\n    }\n\n    // make the canvas fill its parent\n    function onResize() {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n    }\n\n    function generateUniqueId() {\n        const strong = 65535;\n        return (\n            new Date().getTime().toString(16) +\n            \"-\" +\n            Math.floor(strong * Math.random()).toString(16) +\n            \"-\" +\n            Math.floor(strong * Math.random()).toString(16) +\n            \"-\" +\n            Math.floor(strong * Math.random()).toString(16)\n        );\n    }\n\n};\n\nexport default Drawing;\n"]},"metadata":{},"sourceType":"module"}